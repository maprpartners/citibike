<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Getting Started with Amazon EKS - Amazon EKS</title>
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <link rel="home" href="#top" />
      <link rel="up" href="what-is-eks.html" title="What Is Amazon EKS?" />
      <link rel="prev" href="preview-considerations.html" title="Preview Considerations" />
      <link rel="next" href="storage-classes.html" title="Storage Classes" />
      <meta name="description" content="Getting started with Amazon EKS." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="Amazon EKS" />
      <meta name="guide" content="User Guide" />
      <meta name="guide-locale" content="en_us" />
      <link rel="icon" type="image/ico" href="images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/eks/latest/userguide/getting-started.html" />
      <link rel="stylesheet" type="text/css" href="css/jquery-ui.min.css" />
      <link rel="stylesheet" type="text/css" href="font/css/font-awesome.min.css" />
      <link rel="stylesheet" type="text/css" href="css/google-font.css" />
      <link id="code-style" rel="stylesheet" type="text/css" href="css/code/light.css" />
      <link rel="stylesheet" type="text/css" href="css/jquery-ui.theme.css" />
      <link rel="stylesheet" type="text/css" href="css/colorbox.css" />
      <link rel="stylesheet" type="text/css" href="css/awsdocs.css?v=20170615" /><script type="text/javascript" src="js/highlight.pack.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/jquery-ui.min.js"></script><script type="text/javascript" src="js/handlebars.js"></script><script type="text/javascript" src="js/jquery.colorbox.js"></script><script type="text/javascript" src="js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      <div xmlns:db="http://docbook.org/ns/docbook" id="aws-nav" class="aws-nav-header">
         <div class="aws-nav-header-left">
            <div class="aws-nav-logo">
               <!--aws_logo_105x39.png--><a href="http://aws.amazon.com"><img src="images/aws_logo_105x39.png" alt="Amazon Web Services" /></a></div>
         </div>
         <div id="aws-nav-header-right" class="aws-nav-header-right">
            <div class="aws-nav-cta-button-outer"><a id="aws-nav-cta-button" class="aws-nav-button" href="https://console.aws.amazon.com/console/home">Sign In to the Console</a></div>
            <div class="aws-nav-popover-trigger" data-dropdown="aws-nav-dropdown-lang"><select id="languageSelection" onchange="SelectLanguage()">
                  <option value="/de_de/eks/latest/userguide/getting-started.html">Deutsch</option>
                  <option value="/en_us/eks/latest/userguide/getting-started.html" selected="selected">English</option>
                  <option value="/es_es/eks/latest/userguide/getting-started.html">Español</option>
                  <option value="/fr_fr/eks/latest/userguide/getting-started.html">Français</option>
                  <option value="/it_it/eks/latest/userguide/getting-started.html">Italiano</option>
                  <option value="/ja_jp/eks/latest/userguide/getting-started.html">日本語</option>
                  <option value="/ko_kr/eks/latest/userguide/getting-started.html">한국어</option>
                  <option value="/pt_br/eks/latest/userguide/getting-started.html">Português</option>
                  <option value="/zh_cn/eks/latest/userguide/getting-started.html">中文 (简体)</option>
                  <option value="/zh_tw/eks/latest/userguide/getting-started.html">中文 (繁體)</option></select></div><a class="btn btn-pdf-link" id="pdf-link-top" href="eks-ug.pdf#getting-started" target="_blank" style="background-image: url(&#34;images/Adobe_PDF_icon.png&#34;)" title="Open PDF"></a><div id="aws-nav-quicklinks-separator" class="aws-nav-quicklinks-separator">
               <div class="aws-nav-left"></div>
               <div class="aws-nav-right"></div>
            </div>
         </div>
         <div xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" id="topnav-flyout-menu-container">
            <ul id="topnav-flyout-menu"><script id="flyout-item-template" type="text/x-handlebars-template">           
                    {{#flyoutList}}
                    
                    <li>{{listItem}}
                        {{#if subList}}
                        <ul>
                            {{#subList}}
                            <li class="awsdocs-flyout-link-wrapper"><a href="{{target}}">{{text}}</a></li>
                            {{/subList}}
                        </ul>
                        {{/if}}
                    </li>
                    
                    {{/flyoutList}}
                </script></ul>
            <div id="topnav-flyout-menu-spacer"></div>
         </div>
      </div>
      <div id="content-container">
         <div id="left-column">
            <div id="left-col-header">
               <div xmlns:db="http://docbook.org/ns/docbook" id="left-col-top-content">
                  <div id="service-name">Amazon EKS </div>
                  <div id="search"><i id="search-icon" class="fa fa-search fa-2x"></i></div>
                  <div id="guide-info">User Guide
                     <div id="content-button"><i id="toggle-contents" class="fa fa-bars"></i></div>
                  </div>
               </div>
               <form id="finegrainedSearch" method="get" onsubmit="return searchFormSubmit(this);" action="/search/doc-search.html">
                  <div id="search-form"><select id="search-select" name="searchPath">
                        <option value="all">Entire Site</option>
                        <option value="AWSMarketplace">AMIs from AWS Marketplace</option>
                        <option value="amis">AMIs from All Sources</option>
                        <option value="articles">Articles &amp; Tutorials</option>
                        <option value="products_and_info">AWS Product Information</option>
                        <option value="case_studies">Case Studies</option>
                        <option value="customerapps">Customer Apps</option>
                        <option value="documentation">Documentation</option>
                        <option value="documentation-product">Documentation - This Product</option>
                        <option value="documentation-guide" selected="selected">Documentation - This Guide</option>
                        <option value="datasets">Public Data Sets</option>
                        <option value="releasenotes">Release Notes</option>
                        <option value="solution_providers">Partners</option>
                        <option value="code">Sample Code &amp; Libraries</option></select><br /><input id="search-query" name="searchQuery" type="text" placeholder="Search" /><input id="search-button" src="images/search-button.png" alt="Go" type="image" /></div><input type="hidden" name="this_doc_product" id="this_doc_product" value="Amazon EKS" /><input type="hidden" name="this_doc_guide" id="this_doc_guide" value="User Guide" /><input type="hidden" name="doc_locale" value="en_us" /></form>
            </div>
            <div id="toc">
               <ul class="awstoc">
                  <li class="awstoc leaf"><a class="awstoc" href="what-is-eks.html">What Is Amazon EKS?</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="preview-considerations.html">Preview Considerations</a></li>
                  <li class="awstoc leaf"><a class="awstoc selected" href="getting-started.html">Getting Started</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="storage-classes.html">Storage Classes</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="eks-networking.html">Networking</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="managing-users.html">Managing Cluster Authentication</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="service_limits.html">Service Limits</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="EKS-Doc-SubscribeTopic.html">Subscribing to EKS Doc Updates</a></li>
                  <li class="awstoc closed"><a class="awstoc" href="IAM_policies.html">IAM Policies, Roles, and Permissions</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="iam-policy-structure.html">Policy Structure</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="EKS_IAM_user_policies.html">Creating IAM Policies</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="service_IAM_role.html">Amazon EKS Service IAM Role</a></li>
                     </ul>
                  </li>
                  <li class="awstoc leaf"><a class="awstoc" href="dashboard-tutorial.html">Tutorial: Deploy Kubernetes Dashboard</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="create-public-private-vpc.html">Tutorial: Creating a VPC for Amazon EKS</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="doc-history.html">Document History</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="glossary.html">AWS Glossary</a></li>
                  <li id="toc-additional-links"><a class="btn btn-pdf-link" id="pdf-link-alt" href="eks-ug.pdf#top" target="_blank" style="background-image: url(&#34;images/Adobe_PDF_icon.png&#34;)" title="Open PDF"></a></li>
               </ul>
            </div>
         </div>
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> » <a href="http://aws.amazon.com/documentation/eks">Amazon EKS</a> » <a href="index.html">User Guide</a> » <span class="breadcrumb">Getting Started with Amazon EKS</span></div>
                           </td>
                        </tr>
                     </table>
                     <div>
                        <div id="awsdocs-banner-info">
                           <p><em><b>This prerelease documentation is
                                    confidential and is provided under the terms of your nondisclosure agreement with
                                    Amazon Web Services (AWS) or other agreement governing your receipt of AWS confidential
                                    information.</b></em></p>
                        </div>
                     </div>
                     <h1 class="topictitle" id="getting-started">Getting Started with Amazon EKS</h1>
                     <p>This getting started guide helps you to create all of the required resources to use
                        Amazon EKS
                        during the preview.
                     </p>
                     
                     <h2 id="eks-prereqs">Amazon EKS Preview Prerequisites</h2>
                     
                     <p>Before you can create an Amazon EKS cluster, you must create an IAM role that Kubernetes
                        can assume to create AWS resources. For example, when a load balancer is created,
                        Kubernetes assumes the role to create an Elastic Load Balancing load balancer in your
                        account. This only
                        needs to be done one time and can be used for multiple EKS clusters.
                     </p>
                     
                     <p>You must also create a VPC with certain tagging and security group requirements.
                        Although the VPC and security groups can be used for multiple EKS clusters, we recommend
                        that you use a separate VPC for each EKS cluster to provide better network
                        isolation.
                     </p>
                     
                     <p>This section also helps you to install a custom <b>kubectl</b> binary that
                        is configured to work with Amazon EKS.
                     </p>
                     
                     <p>Optionally, you can download a custom version of the AWS CLI to use with Amazon EKS.</p>
                     
                     
                     <h3 id="role-create">Create your Amazon EKS Service Role</h3>
                     
                     <ol>
                        <li>
                           <p>Open the AWS CloudFormation console at
                              <a href="https://us-west-2.console.aws.amazon.com/cloudformation" target="_blank">https://us-west-2.console.aws.amazon.com/cloudformation</a>.
                           </p>
                        </li>
                        <li>
                           
                           <p>From the navigation bar, select the <b>US West (Oregon)</b>
                              region.
                           </p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>At this time, Amazon EKS is only available in the <b>US West
                                    (Oregon)</b> region.
                              </p>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Create stack</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Choose a template</b>, select <b>Specify an
                                 Amazon S3 template URL</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Paste the following URL into the text area and choose
                              <b>Next</b>:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">https://amazon-eks.s3-us-west-2.amazonaws.com/2018-04-04/amazon-eks-service-role.yaml</code></pre>
                           </li>
                        <li>
                           
                           <p>On the <b>Specify Details</b> page, fill out the parameters
                              accordingly, and then choose <b>Next</b>.
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p><b>Stack name</b>: Choose a stack name for your
                                       AWS CloudFormation stack. For example, you can call it
                                       <b>eks-service-role</b>.
                                    </p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>(Optional) On the <b>Options</b> page, tag your stack
                              resources. Choose <b>Next</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>On the <b>Review</b> page, review your information and
                              acknowledge that the stack might create IAM resources. Choose
                              <b>Create</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>When your stack is created, select it in the console and choose
                              <b>Outputs</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Record the <b>RoleArn</b> for the role that was created. You
                              need this when you create your EKS cluster.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     
                     <h3 id="vpc-create">Create your Amazon EKS Cluster VPC</h3>
                     
                     <ol>
                        <li>
                           
                           <p>Open the AWS CloudFormation console at <a href="https://us-west-2.console.aws.amazon.com/cloudformation" target="_blank">https://us-west-2.console.aws.amazon.com/cloudformation</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>From the navigation bar, select the <b>US West (Oregon)</b>
                              region.
                           </p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>At this time, Amazon EKS is only available in the <b>US West
                                    (Oregon)</b> region.
                              </p>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Create stack</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Choose a template</b>, select <b>Specify an
                                 Amazon S3 template URL</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Paste the following URL into the text area and choose
                              <b>Next</b>:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">https://amazon-eks.s3-us-west-2.amazonaws.com/2018-04-04/amazon-eks-vpc-sample.yaml</code></pre>
                           </li>
                        <li>
                           
                           <p>On the <b>Specify Details</b> page, fill out the parameters
                              accordingly, and then choose <b>Next</b>.
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p><b>Stack name</b>: Choose a stack name for your
                                       AWS CloudFormation stack. For example, you can call it
                                       <b>eks-vpc</b>.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Cluster name</b>: Choose a name to use for your
                                       Amazon EKS cluster. <b>You must use the same name when
                                          you create the cluster later.</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>VPC CIDR block</b>: Choose a CIDR range for your
                                       VPC. You may leave the default value.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Subnet 1 block</b>: Choose a CIDR range for
                                       subnet 1. You may leave the default value.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Subnet 2 block</b>: Choose a CIDR range for
                                       subnet 2. You may leave the default value.
                                    </p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>(Optional) On the <b>Options</b> page, tag your stack
                              resources. Choose <b>Next</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>On the <b>Review</b> page, choose
                              <b>Create</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>When your stack is created, select it in the console and choose
                              <b>Outputs</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Record the <b>SecurityGroups</b> value for the security
                              group that was created. You need this when you create your EKS cluster; this
                              security group is applied to the cross-account elastic network interfaces
                              that are created in your subnets that allow the Amazon EKS control plane to
                              communicate with your worker nodes.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Record the <b>SubnetIds</b> for the subnets that were
                              created. You need this when you create your EKS cluster; these are the
                              subnets that your worker nodes are launched into.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     
                     <h3 id="custom-kubectl">Download and Install the Custom
                        <b>kubectl</b> Binary
                     </h3>
                     
                     <p>Amazon EKS clusters require custom-built <b>kubectl</b> and
                        <b>kubelet</b> binaries that include the <a href="https://github.com/heptio/authenticator" target="_blank">Heptio Authenticator</a> to
                        allow IAM authentication for your Kubernetes cluster. This custom version can
                        replace your existing <b>kubectl</b> binary, and you do not need to
                        maintain multiple versions.
                     </p>
                     
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>This requirement will be obsolete in Kubernetes version 1.10.</p>
                     </div>
                     
                     <p class="title"><b>To download and install the custom <b>kubectl</b> binary</b></p>
                     <ol>
                        <li>
                           
                           <p>Download the <b>kubectl</b> binary from Amazon S3:
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p><b>Linux</b>: <a href="https://amazon-eks.s3-us-west-2.amazonaws.com/2018-04-04/bin/linux/amd64/kubectl" target="_blank">https://amazon-eks.s3-us-west-2.amazonaws.com/2018-04-04/bin/linux/amd64/kubectl</a></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>MacOS</b>: <a href="https://amazon-eks.s3-us-west-2.amazonaws.com/2018-04-04/bin/darwin/amd64/kubectl" target="_blank">https://amazon-eks.s3-us-west-2.amazonaws.com/2018-04-04/bin/darwin/amd64/kubectl</a></p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                           <div class="itemizedlist">
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p><b>Windows</b>: <a href="https://amazon-eks.s3-us-west-2.amazonaws.com/2018-04-04/bin/windows/amd64/kubectl.exe" target="_blank">https://amazon-eks.s3-us-west-2.amazonaws.com/2018-04-04/bin/windows/amd64/kubectl.exe</a></p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                           <p>Use the command below to download the binary, substituting the correct URL
                              for your platform. The example below is for macOS clients.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>curl -o kubectl https://amazon-eks.s3-us-west-2.amazonaws.com/2018-04-04/<em class="replaceable"><code>bin/darwin/amd64/kubectl</code></em></code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>Apply execute permissions to the binary.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>chmod +x ./kubectl</code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>Copy the binary to a folder in your <code class="code">$PATH</code>. If you have
                              already installed <b>kubectl</b> (from Homebrew or Apt), then we
                              recommend creating a <code>$HOME/bin/kubectl</code> and ensuring
                              that <code>$HOME/bin</code> comes first in your
                              <code class="code">$PATH</code>.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>cp ./kubectl $HOME/bin/kubectl &amp;&amp; export PATH=$HOME/bin:$PATH</code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>(Optional) Add the <code class="code">$HOME/bin</code> path to your shell
                              initialization file so that it is configured when you open a shell.
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p>For Bash shells on macOS:</p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>echo 'export PATH=$HOME/bin:$PATH' &gt;&gt; ~/.bash_profile</code></strong></code></pre>
                                    </li>
                                 <li class="listitem">
                                    
                                    <p>For Bash shells on Linux:</p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>echo 'export PATH=$HOME/bin:$PATH' &gt;&gt; ~/.bashrc</code></strong></code></pre>
                                    </li>
                              </ul>
                           </div>
                           
                        </li>
                     </ol>
                     
                     
                     
                     <h3 id="custom-aws-cli">Download and Install the Custom AWS CLI</h3>
                     
                     <p> Because Amazon EKS is not yet generally available, it is not included in the AWS
                        CLI.
                        However, you can download and install a custom version of the AWS CLI model to use
                        Amazon EKS.
                     </p>
                     
                     <p>You must first download and install the standard AWS CLI and then add the Amazon EKS
                        extension model. If you do not already have the standard AWS CLI  installed, see
                        <a href="http://docs.aws.amazon.com/cli/latest/userguide/installing.html" target="_blank">Installing the AWS Command Line Interface</a> in the
                        <em>AWS Command Line Interface User Guide</em>.
                     </p>
                     
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>Your system's Python version must be Python 3, or Python 2.7.9 or greater;
                           otherwise, you will receive <code class="code">hostname doesn't match</code> errors with
                           AWS CLI calls to Amazon EKS. For more information, see <a href="http://docs.python-requests.org/en/master/community/faq/#what-are-hostname-doesn-t-match-errors" target="_blank">What are "hostname doesn't match" errors?</a> in the Python Requests
                           FAQ.
                        </p>
                     </div>
                     
                     <p class="title"><b>To download and install the custom AWS CLI model for Amazon EKS</b></p>
                     <ol>
                        <li>
                           
                           <p>Download the custom model. from Amazon S3: <a href="https://amazon-eks.s3-us-west-2.amazonaws.com/2018-04-04/eks-2017-11-01.normal.json" target="_blank">https://amazon-eks.s3-us-west-2.amazonaws.com/2018-04-04/eks-2017-11-01.normal.json</a></p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>curl -O https://amazon-eks.s3-us-west-2.amazonaws.com/2018-04-04/eks-2017-11-01.normal.json</code></strong></code></pre>
                           
                           </li>
                        <li>
                           
                           <p>To install the custom model for Amazon EKS, run the following command:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws configure add-model --service-model file://eks-2017-11-01.normal.json --service-name eks</code></strong></code></pre>
                           </li>
                     </ol>
                     
                     
                     
                     <h2 id="eks-create-cluster">Step 1: Create Your Amazon EKS Cluster</h2>
                     
                     <p>Now you can create your Amazon EKS cluster.</p>
                     
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>When the Amazon EKS cluster is created, the IAM user who creates the cluster is added
                           to the Kubernetes RBAC authorization table as the administrator. Initially, only
                           that IAM user can make calls to the master API using <b>kubectl</b>.
                           Also, the custom version of <b>kubectl</b> uses the AWS SDK for Go to
                           authenticate against your Amazon EKS cluster. If you use the console to create the
                           cluster, you must ensure that the same IAM user credentials are in the AWS SDK
                           credential chain when you are running <b>kubectl</b> commands on your
                           cluster.
                        </p>
                        <p>If you install and configure the AWS CLI, you can configure the IAM credentials
                           for your user. These also work for <b>kubectl</b>. If the AWS CLI is 
                           configured properly for your user, then <b>kubectl</b> can find those credentials as
                           well. For more information, see <a href="http://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html" target="_blank">Configuring the AWS CLI</a> in the <em>AWS Command Line Interface User Guide</em>.
                        </p>
                     </div>
                     
                     
                     <p class="title"><b>To create your cluster with the console</b></p>
                     <ol>
                        <li>
                           
                           <p>Open the Amazon EKS console at <a href="https://console.aws.amazon.com/eks/home?region=us-west-2" target="_blank">https://console.aws.amazon.com/eks/home?region=us-west-2</a>.
                           </p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Important</p>
                              <p>You must use IAM user credentials for this step, <b>not root credentials</b>. If you create
                                 your Amazon EKS cluster using root credentials, you cannot authenticate to the cluster.
                                 For 
                                 more information, see <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/getting-started_how-users-sign-in.html" target="_blank">How Users Sign In to Your Account</a> in the <em>IAM User Guide</em>.
                              </p>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Create cluster</b>.
                           </p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>If your IAM user does not have administrative privileges, you must
                                 explicitly add permissions for that user to call the Amazon EKS API operations.
                                 For more information, see <a href="EKS_IAM_user_policies.html">Creating Amazon EKS IAM
                                    Policies</a></p>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>On the <b>Create master cluster</b> page, fill in the following
                              fields and then choose <b>Create</b>:
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p><b>Master cluster name</b>: A unique name for your
                                       cluster. This must be the cluster name you used in <a href="getting-started.html#vpc-create">Create your Amazon EKS Cluster VPC</a>.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Kubernetes version</b>: The version of Kubernetes to
                                       use for your cluster. By default, the latest available version is
                                       selected.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Role ARN</b>: The <b>RoleARN</b> value
                                       from the AWS CloudFormation output that you generated with <a href="getting-started.html#role-create">Create your Amazon EKS Service Role</a>.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Cluster Subnets</b>: The
                                       <b>SubnetIds</b> values (comma-separated) from the
                                       AWS CloudFormation output that you generated with <a href="getting-started.html#vpc-create">Create your Amazon EKS Cluster VPC</a>.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Security Groups</b>: The
                                       <b>SecurityGroups</b> value from the AWS CloudFormation output that
                                       you generated with <a href="getting-started.html#vpc-create">Create your Amazon EKS Cluster VPC</a>.
                                    </p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>On the <b>Clusters</b> page, choose the name of your newly
                              created cluster to view the cluster information.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>The <b>Status</b> field shows <b>CREATING</b>
                              until the cluster provisioning process completes. When your cluster provisioning
                              is complete (usually less than 10 minutes), and note the <b>Master
                                 endpoint</b> value. This is the endpoint for your Kubernetes master
                              that you use in your <b>kubectl</b> configuration.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Retrieve the <code class="code">certificateAuthority.data</code> for your cluster.
                              Currently, this value is not displayed in the console, and you must use the
                              following AWS CLI command to retrieve the value.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws eks describe-cluster --region us-west-2 --cluster-name <em class="replaceable"><code>preview</code></em>  --query cluster.certificateAuthority.data</code></strong></code></pre>
                           </li>
                     </ol>
                     
                     <p class="title"><b>To create your cluster with the AWS CLI</b></p>
                     <ol>
                        <li>
                           
                           <p>Create your cluster with the following command. Substitute your cluster name,
                              the Amazon Resource Name (ARN) of your Amazon EKS service role that you created in
                              <a href="getting-started.html#role-create">Create your Amazon EKS Service Role</a>, and the subnet and security
                              group IDs for the VPC you created in <a href="getting-started.html#vpc-create">Create your Amazon EKS Cluster VPC</a>.
                           </p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Important</p>
                              <p>You must use IAM user credentials for this step, <b>not root credentials</b>. If you create
                                 your Amazon EKS cluster using root credentials, you cannot authenticate to the cluster.
                                 For 
                                 more information, see <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/getting-started_how-users-sign-in.html" target="_blank">How Users Sign In to Your Account</a> in the <em>IAM User Guide</em>.
                              </p>
                           </div>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws eks create-cluster --region us-west-2 --cluster-name <em class="replaceable"><code>preview</code></em> --role-arn <em class="replaceable"><code>arn:aws:iam::111122223333:role/eks-service-role-AWSServiceRoleForAmazonEKS-EXAMPLEBKZRQR</code></em> --subnets <em class="replaceable"><code>subnet-d474a49f subnet-e794259e</code></em> --security-groups <em class="replaceable"><code>sg-e829f296</code></em></code></strong></code></pre>
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>If your IAM user does not have administrative privileges, you must
                                 explicitly add permissions for that user to call the Amazon EKS API operations.
                                 For more information, see <a href="EKS_IAM_user_policies.html">Creating Amazon EKS IAM
                                    Policies</a></p>
                           </div>
                           
                           <p>Output:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
    "cluster": {
        "status": "NEW",
        "subnets": [
            "<em class="replaceable"><code>subnet-d474a49f</code></em>",
            "<em class="replaceable"><code>subnet-e794259e</code></em>"
        ],
        "clusterName": "<em class="replaceable"><code>preview</code></em>",
        "roleArn": "arn:aws:iam::<em class="replaceable"><code>111122223333:role/eks-service-role-AWSServiceRoleForAmazonEKS-EXAMPLEBKZRQR</code></em>",
        "desiredMasterVersion": "1.9",
        "certificateAuthority": {},
        "securityGroups": [
            "<em class="replaceable"><code>sg-e829f296</code></em>"
        ],
        "createdAt": 1522779824913000
    }
}</code></pre>
                           </li>
                        <li>
                           
                           <p>Cluster provisioning usually takes less than 10 minutes. You can query the
                              status of your cluster with the following command; when your cluster status is
                              <code class="code">ACTIVE</code>, you can proceed.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws eks describe-cluster --region us-west-2 --cluster-name <em class="replaceable"><code>preview</code></em> --query cluster.status</code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>When your cluster provisioning is complete, retrieve the
                              <code class="code">masterEndpoint</code> and <code class="code">certificateAuthority.data</code>
                              values with the following commands. These must be added to your
                              <b>kubectl</b> configuration so that you can communicate with
                              your cluster.
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p>Retrieve the <code class="code">masterEndpoint</code>.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws eks describe-cluster --region us-west-2 --cluster-name <em class="replaceable"><code>preview</code></em>  --query cluster.masterEndpoint</code></strong></code></pre>
                                 </li>
                              <li>
                                 
                                 <p>Retrieve the <code class="code">certificateAuthority.data</code>.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws eks describe-cluster --region us-west-2 --cluster-name <em class="replaceable"><code>preview</code></em>  --query cluster.certificateAuthority.data</code></strong></code></pre>
                                 </li>
                           </ol>
                           
                        </li>
                     </ol>
                     
                     
                     <h2 id="eks-configure-kubectl">Step 2: Configure <code class="code">kubectl</code> for Amazon EKS
                     </h2>
                     
                     <p>In this section, you create a <code>kubeconfig</code> file for your cluster.
                        The code block below shows the <code>kubeconfig</code> elements to add to your
                        configuration. If you have an existing configuration and you are comfortable working
                        with <code>kubeconfig</code> files, you can merge these elements into your
                        existing setup. Be sure to replace the <em class="replaceable"><code>&lt;endpoint-url&gt;</code></em>
                        value with the full endpoint URL (for example,
                        <em class="replaceable"><code>https://EXAMPLE_MASTER_ENDPOINT.yl4.us-west-2.eks.amazonaws.com</code></em>)
                        that was created for your cluster, replace the
                        <em class="replaceable"><code>&lt;base64-encoded-ca-cert&gt;</code></em> with the
                        <code class="code">certificateAuthority.data</code> value you retrieved earlier, and replace the
                        <em class="replaceable"><code>&lt;cluster-name&gt;</code></em> with your cluster name.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">apiVersion: v1
clusters:
- cluster:
    server: <em class="replaceable"><code>&lt;endpoint-url&gt;</code></em>
    certificate-authority-data: <em class="replaceable"><code>&lt;base64-encoded-ca-cert&gt;</code></em>
  name: kubernetes
contexts:
- context:
    cluster: kubernetes
    user: aws
  name: aws
current-context: aws
kind: Config
preferences: {}
users:
- name: aws
  user:
    auth-provider:
      config:
        cluster-id: <em class="replaceable"><code>&lt;cluster-name&gt;</code></em>
      name: aws</code></pre>
                     <p>If you do not have an existing configuration, or to add the Amazon EKS cluster without
                        modifying your existing configuration files, you can use the following procedure to
                        add
                        the Amazon EKS cluster to your configuration.
                     </p>
                     
                     <p class="title"><b>To create your <code>kubeconfig</code> file</b></p>
                     <ol>
                        <li>
                           
                           <p>Create the default <b>kubectl</b> folder if it does not already
                              exist.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>mkdir -p ~/.kube</code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>Open your favorite text editor and copy the above
                              <code>kubeconfig</code> code block into it.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Replace the <em class="replaceable"><code>&lt;endpoint-url&gt;</code></em> with the endpoint URL
                              that was created for your cluster.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Replace the <em class="replaceable"><code>&lt;base64-encoded-ca-cert&gt;</code></em> with the
                              <code class="code">certificateAuthority.data</code> that was created for your
                              cluster.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Replace the <em class="replaceable"><code>&lt;cluster-name&gt;</code></em> with your cluster
                              name.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Save the file to the default <b>kubectl</b> folder, with your
                              cluster name in the file name. For example, if your cluster name is
                              <em class="replaceable"><code>preview</code></em>, save the file to
                              <code>~/.kube/config-<em class="replaceable"><code>preview</code></em></code>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Add that file path to your <code class="code">KUBECONFIG</code> environment variable so
                              that <b>kubectl</b> knows where to look for your cluster
                              configuration.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>export KUBECONFIG=$KUBECONFIG:~/.kube/config-<em class="replaceable"><code>preview</code></em></code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>(Optional) Add the configuration to your shell initialization file so that it
                              is configured when you open a shell.
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p>For Bash shells on macOS:</p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>echo 'export KUBECONFIG=$KUBECONFIG:~/.kube/config-<em class="replaceable"><code>preview</code></em>' &gt;&gt; ~/.bash_profile</code></strong></code></pre>
                                    </li>
                                 <li class="listitem">
                                    
                                    <p>For Bash shells on Linux:</p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>echo 'export KUBECONFIG=$KUBECONFIG:~/.kube/config-<em class="replaceable"><code>preview</code></em>' &gt;&gt; ~/.bashrc</code></strong></code></pre>
                                    </li>
                              </ul>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>Test your configuration.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>kubectl get all</code></strong></code></pre>
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>If you receive the error <code class="code">No Auth Provider found for name
                                    "aws"</code>, you are not using the custom <b>kubectl</b>
                                 required for Amazon EKS during the preview. For more information, see <a href="getting-started.html#custom-kubectl">Download and Install the Custom
                                    <b>kubectl</b> Binary</a>.
                              </p>
                           </div>
                           
                           <p>Output:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">NAME             TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
svc/kubernetes   ClusterIP   10.100.0.1   &lt;none&gt;        443/TCP   1m</code></pre>
                           </li>
                     </ol>
                     
                     
                     <h2 id="eks-launch-workers">Step 3: Launch and Configure Amazon EKS Worker
                        Nodes
                     </h2>
                     
                     <p>Now that your VPC and Kubernetes master are created, you can launch and configure
                        your
                        worker nodes.
                     </p>
                     
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>Amazon EKS worker nodes are standard Amazon EC2 instances, and you are billed for
                           them based
                           on normal EC2 On-Demand prices. For more information, see <a href="https://aws.amazon.com/ec2/pricing/on-demand/" target="_blank">Amazon EC2 Pricing</a>.
                        </p>
                     </div>
                     
                     <p class="title"><b>To launch your worker nodes</b></p>
                     <ol>
                        <li>
                           <p>Open the AWS CloudFormation console at
                              <a href="https://console.aws.amazon.com/cloudformation/" target="_blank">https://console.aws.amazon.com/cloudformation</a>.
                           </p>
                        </li>
                        <li>
                           
                           <p>From the navigation bar, select the <b>US West (Oregon)</b>
                              region.
                           </p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>Amazon EKS is only available in the <b>US West (Oregon)</b>
                                 region at this time.
                              </p>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Create stack</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Choose a template</b>, select <b>Specify an Amazon S3
                                 template URL</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Paste the following URL into the text area and choose
                              <b>Next</b>.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">https://amazon-eks.s3-us-west-2.amazonaws.com/2018-04-04/amazon-eks-nodegroup.yaml</code></pre>
                           </li>
                        <li>
                           
                           <p>On the <b>Specify Details</b> page, fill out the parameters
                              accordingly, and choose <b>Next</b>.
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              
                              
                              
                              
                              
                              
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p><b>Stack name</b>: Choose a stack name for your AWS CloudFormation
                                       stack. For example, you can call it
                                       <b><em class="replaceable"><code>&lt;cluster-name&gt;</code></em>-worker-nodes</b>.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>ClusterName</b>: Enter the name that you used when
                                       you created your Amazon EKS cluster.
                                    </p>
                                    
                                    <div class="aws-note">
                                       <p class="aws-note">Important</p>
                                       <p>This name must exactly match the name you used in <a href="getting-started.html#eks-create-cluster">Step 1: Create Your Amazon EKS Cluster</a>; otherwise, your worker nodes cannot join the cluster.
                                       </p>
                                    </div>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>ClusterControlPlaneSecurityGroup</b>: Choose the
                                       <b>SecurityGroups</b> value from the AWS CloudFormation output that
                                       you generated with <a href="getting-started.html#vpc-create">Create your Amazon EKS Cluster VPC</a>.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>NodeGroupName</b>: Enter a name for your node group
                                       that is included in your Auto Scaling node group name.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>NodeAutoScalingGroupMinSize</b>: Enter the minimum
                                       number of nodes that your worker node Auto Scaling group can scale in
                                       to.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>NodeAutoScalingGroupMaxSize</b>: Enter the maximum
                                       number of nodes that your worker node Auto Scaling group can scale out
                                       to.
                                    </p>
                                    
                                    <div class="aws-note">
                                       <p class="aws-note">Note</p>
                                       <p>We ask that you limit the number of worker nodes in your cluster
                                          no more than 100 during the preview. 
                                       </p>
                                    </div>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>NodeInstanceType</b>: Choose an instance type for
                                       your worker nodes.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>NodeImageId</b>: Enter the current Amazon EKS worker node
                                       AMI ID (<b>ami-228dee5a</b>).
                                    </p>
                                    
                                    <div class="aws-note">
                                       <p class="aws-note">Note</p>
                                       <p>The Amazon EKS worker node AMI is based on Amazon Linux 2, with a custom
                                          <code class="code">kubelet</code> and <code class="code">kube-proxy</code> built in. You
                                          can track security or privacy events for Amazon Linux 2 at the <a href="https://alas.aws.amazon.com/alas2.html" target="_blank">Amazon Linux Security
                                             Center</a> or subscribe to the associated <a href="https://alas.aws.amazon.com/AL2/alas.rss" target="_blank">RSS feed</a>.
                                          Security and privacy events include an overview of the issue, what
                                          packages are affected, and how to update your instances to correct
                                          the issue.
                                       </p>
                                    </div>
                                    
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>KeyName</b>: Enter the name of an Amazon EC2 SSH key pair
                                       that you can use to connect using SSH into your worker nodes with after
                                       they launch.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>VpcId</b>: Enter the ID for the VPC that you created
                                       in <a href="getting-started.html#vpc-create">Create your Amazon EKS Cluster VPC</a>.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Subnets</b>: Choose the subnets that you created in
                                       <a href="getting-started.html#vpc-create">Create your Amazon EKS Cluster VPC</a>.
                                    </p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>On the <b>Options</b> page, you can choose to tag your stack
                              resources. Choose <b>Next</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>On the <b>Review</b> page, review your information, acknowledge
                              that the stack might create IAM resources, and then choose
                              <b>Create</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>When your stack has finished creating, select it in the console and choose the
                              <b>Outputs</b> tab.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Record the <b>NodeInstanceRole</b> for the node group that was
                              created. You need this when you configure your Amazon EKS worker nodes.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p class="title"><b>To enable worker nodes to join your cluster</b></p>
                     <ol>
                        <li>
                           
                           <p>Download, edit, and apply the AWS authenticator configuration map.</p>
                           
                           <ol>
                              <li>
                                 
                                 <p>Download the configuration map.</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>curl -O https://amazon-eks.s3-us-west-2.amazonaws.com/2018-04-04/aws-auth-cm.yaml</code></strong></code></pre>
                                 </li>
                              <li>
                                 
                                 <p>Open the file with your favorite text editor, replace the
                                    <em class="replaceable"><code>&lt;ARN of instance role (not instance
                                          profile)&gt;</code></em> snippet with the
                                    <b>NodeInstanceRole</b> value that you recorded in the
                                    previous procedure, and save the file.
                                 </p>
                                 
                                 <div class="aws-note">
                                    <p class="aws-note">Important</p>
                                    <p>Do not modify any other lines in this file.</p>
                                 </div>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">apiVersion: v1
kind: ConfigMap
metadata:
  name: aws-auth
  namespace: default
data:
  mapRoles: |
    - rolearn: <em class="replaceable"><code>&lt;ARN of instance role (not instance profile)&gt;</code></em>
      username: system:node:{{EC2PrivateDNSName}}
      groups:
        - system:bootstrappers
        - system:nodes
        - system:node-proxier</code></pre>
                                 </li>
                              <li>
                                 
                                 <p>Apply the configuration. (This command may take a few minutes to
                                    finish)
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>kubectl apply -f aws-auth-cm.yaml</code></strong></code></pre>
                                 <div class="aws-note">
                                    <p class="aws-note">Note</p>
                                    <p>If you receive the error <code class="code">No Auth Provider found for name
                                          "aws"</code>, you are not using the custom
                                       <b>kubectl</b> required for Amazon EKS during the
                                       preview. For more information, see <a href="getting-started.html#custom-kubectl">Download and Install the Custom
                                          <b>kubectl</b> Binary</a>.
                                    </p>
                                 </div>
                                 
                              </li>
                           </ol>
                           
                        </li>
                        <li>
                           
                           <p>Watch the status of your nodes and wait for them to reach the
                              <code class="code">Ready</code> status.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>kubectl get nodes --watch</code></strong></code></pre>
                           </li>
                     </ol>
                     
                     
                     <h2 id="eks-guestbook">Step 4: Launch a Guest Book Application</h2>
                     
                     <p>In this section, you create a sample guest book application to test your new
                        cluster.
                     </p>
                     
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>For more information about setting up the guest book example, see <a href="https://github.com/kubernetes/examples/blob/master/guestbook-go/README.md" target="_blank">https://github.com/kubernetes/examples/blob/master/guestbook-go/README.md</a>
                           in the Kubernetes documentation.
                        </p>
                     </div>
                     
                     <p class="title"><b>To create your guest book application</b></p>
                     <ol>
                        <li>
                           
                           <p>Create the Redis master replication controller.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>kubectl apply -f https://raw.githubusercontent.com/kubernetes/kubernetes/v1.9.2/examples/guestbook-go/redis-master-controller.json</code></strong></code></pre>
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>If you receive the error <code class="code">No Auth Provider found for name
                                    "aws"</code>, you are not using the custom <b>kubectl</b>
                                 required for Amazon EKS during the preview. For more information, see <a href="getting-started.html#custom-kubectl">Download and Install the Custom
                                    <b>kubectl</b> Binary</a>.
                              </p>
                           </div>
                           
                           <p>Output:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">replicationcontroller "redis-master" created</code></pre>
                           </li>
                        <li>
                           
                           <p>Create the Redis master service.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>kubectl apply -f https://raw.githubusercontent.com/kubernetes/kubernetes/v1.9.2/examples/guestbook-go/redis-master-service.json</code></strong></code></pre>
                           <p>Output:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">service "redis-master" created</code></pre>
                           </li>
                        <li>
                           
                           <p>Create the Redis slave replication controller.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>kubectl apply -f https://raw.githubusercontent.com/kubernetes/kubernetes/v1.9.2/examples/guestbook-go/redis-slave-controller.json</code></strong></code></pre>
                           <p>Output:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">replicationcontroller "redis-slave" created</code></pre>
                           </li>
                        <li>
                           
                           <p>Create the Redis slave service.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>kubectl apply -f https://raw.githubusercontent.com/kubernetes/kubernetes/v1.9.2/examples/guestbook-go/redis-slave-service.json</code></strong></code></pre>
                           <p>Output:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">service "redis-slave" created</code></pre>
                           </li>
                        <li>
                           
                           <p>Create the guestbook replication controller.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>kubectl apply -f https://raw.githubusercontent.com/kubernetes/kubernetes/v1.9.2/examples/guestbook-go/guestbook-controller.json</code></strong></code></pre>
                           <p>Output:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">replicationcontroller "guestbook" created</code></pre>
                           </li>
                        <li>
                           
                           <p>Create the guestbook service.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>kubectl apply -f https://raw.githubusercontent.com/kubernetes/kubernetes/v1.9.2/examples/guestbook-go/guestbook-service.json</code></strong></code></pre>
                           <p>Output:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">service "guestbook" created</code></pre>
                           </li>
                        <li>
                           
                           <p>Query the services in your cluster and wait until the <b>External
                                 IP</b> column for the <code class="code">guestbook</code> service is
                              populated.
                           </p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>It may take several minutes before the IP address is available.</p>
                           </div>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>kubectl get services -o wide</code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>After your external IP address is available, point a web browser to that
                              address at port 3000 to view your guest book. For example,
                              <em class="replaceable"><code>http://a7a95c2b9e69711e7b1a3022fdcfdf2e-1985673473.us-west-2.elb.amazonaws.com:3000</code></em></p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>It may take several minutes for DNS to propagate and for your guest book
                                 to show up.
                              </p>
                           </div>
                           
                           <div class="mediaobject">
                              
                              <img src="images/guestbook.png" alt="&#xA;                        Guest book&#xA;                    " />
                              
                              
                              
                           </div>
                           
                           <div class="aws-note">
                              <p class="aws-note">Important</p>
                              <p>If you are unable to connect to the external IP address with your browser,
                                 be sure that your corporate firewall is not blocking non-standards ports,
                                 like 3000. You can try switching to a guest network to verify.
                              </p>
                           </div>
                           
                        </li>
                     </ol>
                     
                     
                     <h2 id="eks-guestbook-cleanup">Step 5: Cleaning Up Guest Book Objects</h2>
                     
                     <p>When you are finished experimenting with your guest book application, you should clean
                        up the resources that you created for it. The following command deletes all of the
                        services and replication controllers for the guest book application:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>kubectl delete rc/redis-master rc/redis-slave rc/guestbook svc/redis-master svc/redis-slave svc/guestbook</code></strong></code></pre>
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>If you receive the error <code class="code">No Auth Provider found for name "aws"</code>, you
                           are not using the custom <b>kubectl</b> required for Amazon EKS during the
                           preview. Be sure that the custom <b>kubectl</b> for Amazon EKS is first in
                           your <code class="code">PATH</code>. For more information, see <a href="getting-started.html#custom-kubectl">Download and Install the Custom
                              <b>kubectl</b> Binary</a>.
                        </p>
                     </div>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="preview-considerations.html">« Previous </a><a class="awstoc" accesskey="n" href="storage-classes.html">Next »</a></div>
                     <div id="copyright-main-footer">© 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Amazon EKS Preview Prerequisites"><a class="pagetoc" href="#eks-prereqs">Amazon EKS Preview Prerequisites</a></li>
                        <li class="pagetoc" name="Step 1: Create Your Amazon EKS Cluster"><a class="pagetoc" href="#eks-create-cluster">Step 1: Create Your Amazon EKS Cluster</a></li>
                        <li class="pagetoc" name="Step 2: Configure kubectl for Amazon EKS"><a class="pagetoc" href="#eks-configure-kubectl">Step 2: Configure kubectl for Amazon EKS</a></li>
                        <li class="pagetoc" name="Step 3: Launch and Configure Amazon EKS Worker&#xA;                Nodes"><a class="pagetoc" href="#eks-launch-workers">Step 3: Launch and Configure Amazon EKS Worker
                              Nodes</a></li>
                        <li class="pagetoc" name="Step 4: Launch a Guest Book Application"><a class="pagetoc" href="#eks-guestbook">Step 4: Launch a Guest Book Application</a></li>
                        <li class="pagetoc" name="Step 5: Cleaning Up Guest Book Objects"><a class="pagetoc" href="#eks-guestbook-cleanup">Step 5: Cleaning Up Guest Book Objects</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="footer">
         <div id="footer_short_fb" class="hide" title="Feedback"><a target="_blank" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?feedback_destination_id=5a08f8e9-7260-49e4-bac3-ada98f265157&amp;topic_url=http://docs.aws.amazon.com/en_us/eks/latest/userguide/getting-started.html&amp;hidden_guide_name=User Guide&amp;hidden_api_version=&amp;hidden_file_name=getting-started"><i class="fa fa-envelope-o"></i></a></div>
         <div id="footer_toggle" class="mediaobject"><img id="footer_toggle_img" src="images/expanderarrow.png" /><img id="footer_toggle_img_collapse" class="hide" src="images/expanderarrowright.png" /></div>
         <div id="footer-left"><a target="_top" href="http://aws.amazon.com/terms">Terms of Use</a> | <a target="_top" href="http://aws.amazon.com/privacy">Privacy</a> | © 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.
         </div>
         <div id="footer-right">
            <div id="feedback">
               <div id="forums"></div>
               <div id="feedback-message">Did this page help you?</div>
               <div id="feedback-yesno-buttons"><a class="awstoc btn btn-default" target="_blank" href="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/eks/latest/userguide/getting-started.html">Yes</a><a class="awstoc btn btn-default" target="_blank" href="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/eks/latest/userguide/getting-started.html">No</a></div>
               <div id="feedback-feedback-button"><a class="awstoc btn btn-default" target="_blank" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?feedback_destination_id=5a08f8e9-7260-49e4-bac3-ada98f265157&amp;topic_url=http://docs.aws.amazon.com/en_us/eks/latest/userguide/getting-started.html&amp;hidden_guide_name=User Guide&amp;hidden_api_version=&amp;hidden_file_name=getting-started">Feedback</a></div>
            </div>
         </div>
      </div>
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon EKS';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   </body>
</html>